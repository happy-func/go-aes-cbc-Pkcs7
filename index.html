<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="utf-8">
        <title>AES加密</title>
        <script src="./lib/aes.rollup.min.js"></script>
    </head>
    <body>
        <script>
            const key = "go-encrypt-tests";  //十六位十六进制数作为密钥
            const iv = '1234567890qwerty';   //十六位十六进制数作为密钥偏移量

            function parse(str) {
                return CryptoJS.enc.Utf8.parse(str);
            }

            //解密方法
            function Decrypt(code, secret_key, iv) {
                return CryptoJS.AES.decrypt(code, parse(secret_key), {
                    iv: parse(iv),
                    mode: CryptoJS.mode.CBC,
                    padding: CryptoJS.pad.Pkcs7
                }).toString(CryptoJS.enc.Utf8);
            }

            //加密方法
            function Encrypt(data, secret_key, iv) {
                return CryptoJS.AES.encrypt(parse(data), parse(secret_key), {
                    iv: parse(iv),
                    mode: CryptoJS.mode.CBC,
                    padding: CryptoJS.pad.Pkcs7
                }).toString();
            }

            const obj = {a: 132, b: "hello world", ab: 2, uuid: "1qaz-2wsx-3edc-4rfv"}
            const encryptData = Encrypt(JSON.stringify(obj), key, iv);
            const str = `加密前的原文：${JSON.stringify(obj)}\n加密后的内容：${encryptData}\n解密后的内容：${Decrypt(encryptData, key, iv)}`;
            document.body.innerText = str;

        </script>
    </body>
</html>